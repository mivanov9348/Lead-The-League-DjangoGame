{% extends 'base.html' %}

{% block title %}Results{% endblock %}

{% block extra_css %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/results.css' %}">
{% endblock %}

{% block content %}
<div class="livescore-container">
    <div class="controls">
        <h2>Fixtures for Round {{ round_number }}</h2>
        <div class="navigation">
            <a href="?round={{ round_number|add:"-1" }}" {% if round_number <= 1 %}class="disabled"{% endif %}>
                Previous Round
            </a>
            <a href="?round={{ round_number|add:"1" }}">Next Round</a>
        </div>
    </div>

    {% for league_season, fixtures_list in fixtures.items %}
    <div class="league-season">
        <div class="league-header">
            <h3>{{ league_season }}</h3>
        </div>

        {% for fixture in fixtures_list %}
        <div class="match">
            <!-- Home team with logo -->
            <div class="home-team">
                {% if fixture.home_team.logo %}
                <img class="team-logo" src="{{ fixture.home_team.logo }}" alt="{{ fixture.home_team.name }} Logo">
                {% endif %}
                {{ fixture.home_team.name }}
            </div>

            <!-- Match score (can be dynamic based on actual match result) -->
            <div class="score">
                <a class="score-link" href="#">
                    {{ fixture.home_goals }} - {{ fixture.away_goals }}
                </a>
            </div>

            <!-- Away team with logo -->
            <div class="away-team">
                {% if fixture.away_team.logo %}
                <img class="team-logo" src="{{ fixture.away_team.logo }}" alt="{{ fixture.away_team.name }} Logo">
                {% endif %}
                {{ fixture.away_team.name }}
            </div>

            <!-- Match time -->
            <div class="time">{{ fixture.time }}</div>
        </div>
        {% endfor %}
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block script %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        function toggleGoalscorers(matchId) {
            var panel = document.getElementById('goalscorers-' + matchId);
            if (panel.style.display === 'none' || panel.style.display === '') {
                panel.style.display = 'block';
            } else {
                panel.style.display = 'none';
            }
        }
        // Attach function to global scope for click events.
        window.toggleGoalscorers = toggleGoalscorers;
    });
</script>
{% endblock %}
