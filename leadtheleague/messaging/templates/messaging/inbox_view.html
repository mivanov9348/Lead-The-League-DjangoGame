{% extends 'base.html' %}

{% block title %}Notifications{% endblock %}

{% block extra_css %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/inbox_view.css' %}">
{% endblock %}

{% block content %}
<div class="news-page">
    <!-- Sidebar with news list -->
    <div class="news-sidebar">
        <form method="get" action="">
            <input type="text" name="search" placeholder="Search messages..." value="{{ request.GET.search }}">
        </form>
        <hr/>
        <ul class="news-list">
            {% for notification in context %}
            <li class="news-item {% if notification.is_read %}read{% else %}unread{% endif %}">
                <a href="?notification_id={{ notification.id }}">
                    <p class="notification-title">{{ notification.title }}</p>
                    <p>{{ notification.preview|default:"No preview" }}</p>
                    <p class="date-text">{{ notification.date_sent|date:"d.m.Y H:i" }}</p>
                </a>
            </li>
            {% endfor %}
        </ul>

        <!-- Pagination controls -->
        <div class="pagination">
            {% if context.has_previous %}
            <a href="?page={{ context.previous_page_number }}">&laquo; Назад</a>
            {% endif %}
            <span>Page {{ context.number }} от {{ context.paginator.num_pages }}</span>
            {% if context.has_next %}
            <a href="?page={{ context.next_page_number }}">Forward &raquo;</a>
            {% endif %}
        </div>
    </div>

    <!-- News detail view -->
    <div class="news-detail">
        {% if notification %}
        <h2>{{ notification.title }}</h2>
        <p class="date-text">{{ notification.date_sent|date:"d.m.Y H:i" }}</p>
        <hr/>
        <p>{{ notification.message }}</p>
        {% else %}
        <h2>Select a message to view details</h2>
        {% endif %}
    </div>
</div>
{% endblock %}
