{% extends 'base.html' %}

{% block title %}Player Profile{% endblock %}

{% block extra_css %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/player_profile.css' %}">
{% endblock %}

{% block content %}
<div class="profile-grid">

    <div class="navigation">
        <button onclick="goBack()">Back</button>
    </div>

    <div class="profile-header">
        <div class="player-photo">
            <img src="{% static 'playersimages/' %}{{ player.id }}.png" alt="Player Photo">
        </div>
        <div class="player-info">
            <ul>
                <li> {{ player.name }}</li>
                <li> {{ player.position }}</li>
                <hr/>
                <li> {{ player_team }}</li>
                <li> {{ player.nationality }}</li>
                {% load humanize %}
                <hr/>
                <li><strong>Age:</strong> {{ player.age }}</li>
                <li><strong>Price:</strong> {{ player.price|intcomma }}</li>
            </ul>
        </div>
    </div>

    <div class="player-attributes">
        <h2>Attributes</h2>
        <hr/>
        <div class="attributes-grid">
            {% for name, value in attributes.items %}
            <div class="attribute
            {% if value <= 10 %}attribute-low{% elif value <= 15 %}attribute-medium{% else %}attribute-high{% endif %}">
                {{ name }}: {{ value }}
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="player-stats">
        <h2>Season Statistics</h2>
        <hr/>
        <table>
            <thead>
            <tr>
                <th>Season</th>
                {% for stat_key, official_name in statistic_names.items %}
                <th>{{ official_name }}</th>
                {% endfor %}
            </tr>
            </thead>
            <tbody>
            {% for season, stats in season_stats.items %}
            <tr>
                <td>{{ season }}</td>
                {% for stat_key, official_name in statistic_names.items %}
                <td>
                    {{ stats.stat_key|default:'N/A' }}
                </td>
                {% endfor %}
            </tr>
            {% empty %}
            <tr>

            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<script>
    function goBack() {
        window.history.back();
    }

    function goForward() {
        window.history.forward();
    }
</script>
{% endblock %}